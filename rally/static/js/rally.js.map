{
    "version": 3,
    "sources": [
        "sourceMap"
    ],
    "names": [
        "REQUIRED_STAMPS",
        "TOKEN_SALT",
        "init",
        "_0x583ec2",
        "fetch",
        "_0x35164a",
        "renderGrid",
        "_0x208fb0",
        "console",
        "processStamps",
        "updateUI",
        "_0x1e1f6f",
        "_0x983b78",
        "document",
        "_0xc3511",
        "_0x43f82e",
        "_0x1fd12a",
        "_0x35c603",
        "_0x1cb0dd",
        "decodeStampFromToken",
        "_0xe59c22",
        "_0x219c7a",
        "atob",
        "_0x14dbff",
        "_0x5c4065",
        "_0x4e5333",
        "_0x530130",
        "URLSearchParams",
        "window",
        "_0x4b07e4",
        "_0x12496d",
        "_0x40d0c0",
        "addStamp",
        "_0x316168",
        "_0x290ba1",
        "JSON",
        "localStorage",
        "_0x589b80",
        "_0x2d687c",
        "_0x3ae285",
        "showToast",
        "_0x43c6cc",
        "_0x134f3f",
        "setTimeout",
        "_0x3670d0",
        "_0x38db13",
        "_0x2c6e50",
        "_0x2bb47e",
        "Set",
        "Array",
        "_0x5f309e",
        "_0x20d4ba",
        "_0x54ef61",
        "_0x4ea0c9",
        "_0x394b8f",
        "_0x3fd68e",
        "_0x141d5e",
        "showCompleteBox",
        "_0x1867a2",
        "_0x20b873",
        "_0xadfdd1",
        "_0x16efda",
        "_0x52eb0a"
    ],
    "mappings": "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",
    "sourcesContent": [
        "const REQUIRED_STAMPS = 10;\nconst TOKEN_SALT = \"kiimart-2025-salt\";\n\nasync function init() {\n    try {\n        const response = await fetch('data/artists.json');\n        const artists = await response.json();\n        renderGrid(artists);\n    } catch (e) {\n        console.error(\"Failed to load artists\", e);\n        return;\n    }\n\n    processStamps();\n    updateUI();\n}\n\nfunction renderGrid(items) {\n    const grid = document.getElementById('grid');\n    grid.innerHTML = '';\n\n    items.forEach(item => {\n        item.artists.forEach(artistName => {\n            const stampDiv = document.createElement('div');\n            stampDiv.className = 'stamp';\n            stampDiv.dataset.stampId = `t${item.table}-${artistName}`;\n\n            const titleDiv = document.createElement('div');\n            titleDiv.className = 'stamp-title';\n            titleDiv.textContent = `Table ${item.table}`;\n\n            const nameDiv = document.createElement('div');\n            nameDiv.textContent = artistName;\n\n            stampDiv.appendChild(titleDiv);\n            stampDiv.appendChild(nameDiv);\n            grid.appendChild(stampDiv);\n        });\n    });\n}\n\nfunction decodeStampFromToken(token) {\n    if (!token) return null;\n    try {\n        const decoded = atob(token);\n        const [boothId, salt] = decoded.split(\"|\");\n        if (salt === TOKEN_SALT && boothId) {\n            return boothId;\n        }\n    } catch (e) {\n        // ignore invalid tokens\n    }\n    return null;\n}\n\nfunction processStamps() {\n    const params = new URLSearchParams(window.location.search);\n    const legacyStamp = params.get(\"stamp\");\n    const token = params.get(\"k\");\n\n    let newStamp = null;\n    if (token) {\n        newStamp = decodeStampFromToken(token);\n    } else if (legacyStamp) {\n        // DISABLE legacy raw ID support to be safe and strictly follow the plan\n        // newStamp = legacyStamp; \n    }\n\n    if (newStamp) {\n        addStamp(newStamp);\n        window.history.replaceState({}, document.title, window.location.pathname);\n    }\n}\n\nfunction addStamp(id) {\n    let stamps = [];\n    try {\n        stamps = JSON.parse(localStorage.getItem('kiimart_stamps') || '[]');\n    } catch (e) {\n        stamps = [];\n    }\n\n    if (id && !stamps.includes(id)) {\n        stamps.push(id);\n        localStorage.setItem('kiimart_stamps', JSON.stringify(stamps));\n        updateUI();\n\n        // Show toast\n        const firstHyphenIndex = id.indexOf('-');\n        if (firstHyphenIndex !== -1) {\n            const artistName = id.substring(firstHyphenIndex + 1);\n            showToast(`${artistName} Stamp Added!`);\n        } else {\n            showToast(`Stamp Added!`);\n        }\n\n        return true; // New stamp added\n    }\n    return false; // Already exists or invalid\n}\n\nfunction showToast(message) {\n    const toast = document.getElementById(\"toast\");\n    if (toast) {\n        toast.textContent = message;\n        toast.className = \"toast show\";\n        setTimeout(function () {\n            toast.className = toast.className.replace(\"show\", \"\");\n        }, 3000);\n    }\n}\n\nfunction updateUI() {\n    let stamps = [];\n    try {\n        stamps = JSON.parse(localStorage.getItem('kiimart_stamps') || '[]');\n    } catch (e) {\n        stamps = [];\n    }\n\n    // Get all valid stamp IDs from the DOM to validate localStorage entries\n    const validStampElements = document.querySelectorAll('[data-stamp-id]');\n    const validStampIds = new Set(Array.from(validStampElements).map(el => el.dataset.stampId));\n\n    // Filter stored stamps to only include valid ones\n    const validCollectedStamps = stamps.filter(id => validStampIds.has(id));\n\n    validCollectedStamps.forEach(id => {\n        const elements = document.querySelectorAll(`[data-stamp-id=\"${id}\"]`);\n        elements.forEach(el => el.classList.add('collected'));\n    });\n\n    const countEl = document.getElementById('count');\n    countEl.textContent = `Stamps collected: ${validCollectedStamps.length}`;\n\n    if (validCollectedStamps.length >= REQUIRED_STAMPS) {\n        showCompleteBox();\n    }\n}\nasync function showCompleteBox() {\n    const completeBox = document.getElementById('complete');\n    completeBox.style.display = 'block';\n\n    // fetch the prize code only if conditions are met\n    try {\n        const response = await fetch(`data/4fcdcb5e7b6131e5ba5a688325a4411b.json`);\n        const data = await response.json();\n        const codeSpan = completeBox.querySelector('.code');\n        if (codeSpan) {\n            codeSpan.textContent = data.code_02;\n        }\n    } catch (e) {\n        console.error(\"Failed to load prize code\", e);\n    }\n}\n\n// Start the application\ninit();"
    ]
}